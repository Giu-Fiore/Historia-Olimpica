# Hito 1: Análisis a 120 años de historia olímpica

-   **Integrantes (Grupo 7)**:

    -   Giulianna Pesce
    -   Felipe Olivares
    -   Víctor Silva
    -   Jaime Navarro
    -   Karla Toledo

#Nota: Si te falla un bloque de código, vuelve a correrlo, es probable que se deba a choque de paquetes en R.

## Introducción

Los Juegos Olímpicos constan del mayor evento deportivo del mundo, reuniendo a los países y sus representantes en diversas disciplinas, quienes pondrán a prueba todas sus habilidades, trabajo y talento, para conseguir la tan añorada presea dorada.

Su origen se remonta a la Antigua Grecia, cerca del año 776 a.C, donde se realizaban en el santuario de Zeus ubicado en Olimpia, en honor a dicho dios. Durante 13 realizaciones, la única competencia realizada consistía en la carrera de los 600 pies. Cerca del año 724 a.C, se sumaron más competencias como carreras de carros tirados a caballo, lucha y lanzamiento de disco. Debido a la expansión del cristianismo y la prohibición de prácticas consideradas "paganas", los Juegos Olímpicos dejaron de realizarse.

Hace 120 años, se inauguraron en Atenas los primeros Juegos Olímpicos modernos. En los Juegos de la I Olimpiada sólo participaron 241 atletas, todos hombres, pues aún no estaba bien visto que las mujeres participaran en esta clase de eventos. Había deportistas de catorce países distintos reconocidos por el COI: Alemania, Australia, Austria, Bulgaria, Chile, Dinamarca, Estados Unidos, Francia, Grecia, Hungría, Italia, Reino Unidos, Suecia y Suiza. En aquella primera cita olímpica sólo se compitió en nueve deportes: atletismo, ciclismo, esgrima, gimnasia, tiro, natación, tenis, halterofilia y lucha. Hasta 150.000 personas se acercaron al recinto para animar a sus deportistas y disfrutar de un momento histórico.

Actualmente, las Olimpiadas se dividen en dos eventos principales: los Juegos Olímpicos de Verano y los Juegos Olímpicos de Invierno. Estos últimos remontan sus inicios al año 1924, donde se llevaban a cabo al mismo tiempo que los juegos de verano. A partir de 1994, se separó la realización de los eventos invernales para potenciar su desarrollo, y desde entonces se realizan en el tercer año de las Olimpiadas.

El paso de los años ha ido modificando poco a poco la competición. Se han ido añadiendo y quitando disciplinas deportivas, el número de atletas siempre ha ido en aumento y la incorporación femenina supuso todo un hito en lo que se refiere a la igualdad de género. Además, en los primeros años al ganador de cada competición le daban una medalla de plata y una rama de laurel, mientras que el segundo recibía una medalla de cobre y una rama de laurel. A partir de los JJ.OO. de 1904, en San Luis, empezó la tradición de hacer un podio con medallas de oro, plata y bronce para los tres primeros.

Los Juegos Olímpicos se celebran desde entonces cada cuatro años, tan solo las dos Guerras Mundiales han impedido este evento. En 1916, 1940 y 1944 los deportistas se quedaron sin su competición internacional.

En base a este evento tan importante, se creó el dataset seleccionado para desarrollar este proyecto, el cual se centra en la participación de más de 270 mil atletas desde sus comienzos, describiendo atributos tales como género, edad, altura, peso, país de origen, año de la participación, deporte en que se desempeña y qué medalla ganó.

Es a partir de estos datos que se busca analizar ciertas características de las olimpiadas, tales como la evolución de la participación femenina, mayor concentración de medallas para ciertos países, características físicas predominantes según el deporte practicado, entre otras.

## Exploración de datos

En primer lugar, importamos los archivos ".csv" que contienen la Data obtenidos a partir de [120 años de Historia Olimpica](https://www.kaggle.com/datasets/heesoo37/120-years-of-olympic-history-athletes-and-results) y [GDP per capita](https://www.kaggle.com/datasets/zgrcemta/world-gdpgdp-gdp-per-capita-and-annual-growths?select=gdp_per_capita.csv).

```{r}
library(dplyr)
#Se importa la libreria

#Se importan los datasets
athlete_events <- read.csv("athlete_events.csv", encoding = "UTF-8", as.is = F)
gdp_per_capita <- read.csv("gdp_per_capita.csv", encoding = "UTF-8", as.is = F)
noc_regions  <- read.csv("noc_regions.csv", encoding = "UTF-8", as.is = F)
```

Posteriormente, se realizó una nueva columna para identificar en binario el sexo y se coloco en orden Bronze:1, Plata:2 y Oro:3, además, de un binario si obtuvo o no medalla, esto con el fin de poder realizar correctamente el análisis.

```{r}
athlete_events1 <- athlete_events
library(dplyr)

#pasamos los datos de sexo de los atletas a binario para poder manejar los datos de mejor manera
athlete_events1 <- athlete_events1 %>%
  mutate(Sex_bin = case_when(
    Sex == "F" ~ 0,
    Sex == "M" ~ 1)
  )

#Pasamos los datos de las medallas a valores numéricos
#en donde la columna con B->1, S->2,  G->3
athlete_events1 <- athlete_events1 %>%
  mutate(Medal_num = case_when(
    is.na(Medal) ~ 0,
    Medal == "Bronze" ~ 1,
    Medal == "Silver" ~ 2,
    Medal == "Gold" ~ 3)
  )

#Se genera la columna con B,S,G -> 1
athlete_events1 <- athlete_events1 %>%
  mutate(Medal_bin = case_when(
    is.na(Medal) ~ 0,
    Medal == "Bronze" ~ 1,
    Medal == "Silver" ~ 1,
    Medal == "Gold" ~ 1)
  )
```

Se realiza un resumen de cada variable.

```{r}
summary(athlete_events1)
```

Se identifica que...

### Cantidad de medallas y partipantes por país.

Para esto, primero crearemos una data donde solo estén los participantes que obtuvieron medallas en alguna competencia. Entonces, creamos una nueva data en donde eliminamos las filas que tengan Na's en la columna Medal.

```{r}
#borramos filas con medalla NA
athlete_events_not.na <- athlete_events1[!is.na(athlete_events1$Medal),]
```

```{r}
#La distribución de deportistas por país a partir del NOC de cada país
library(dplyr)

nparticipantespaises<-athlete_events1%>%
  filter(duplicated(Name)==FALSE)%>%
  group_by(NOC)%>%
  summarise(total=sum(Sex_bin))

nparticipantespaises<-nparticipantespaises [order(nparticipantespaises$total, decreasing = TRUE), ]
head(nparticipantespaises)

```

```{r}
#La distribución de medallas por país a partir del NOC,Medal
nmedallasxNOC <-table(athlete_events_not.na$NOC,athlete_events_not.na$Medal_bin )

nmedallasxNOC<- as.data.frame.table(nmedallasxNOC) 
nmedallasxNOC <- nmedallasxNOC [order(nmedallasxNOC$Freq, decreasing = TRUE), ]
nmedallasxNOC<-  nmedallasxNOC %>%
  select(Var1,Freq)
head(nmedallasxNOC)
```

### Top 10 países con medallas de oro, plata y bronce

En este apartado se gráfican los países con mayor cantidad de medallas para cada categoría: Gold, Silver y Bronze. Para esto se crea una data para cada categoría de medallas. Así, tendremos 3 tablas en donde solo estén los participantes con medalla de oro, plata y bronce, respectivamente.

#### Medallas de Oro

```{r}
athlete_events_oro <- athlete_events_not.na[athlete_events_not.na$Medal=="Gold",] #filtramos solo las medallas de oro
```

Vemos los países que obtienen medallas de oro.

```{r}
# Países con medalla de oro
head(unique(athlete_events_oro$NOC))
```

Creamos una tabla en donde se muestre la cantidad de medallas de oro que ha obtenido cada país durante los 120 años, y ordenamos los países de mayor a menor según la cantidad de medallas de oro.

```{r}
tabla_paises_oro <- data.frame(table(athlete_events_oro$NOC))

tabla_paises_oro <- tabla_paises_oro[order(tabla_paises_oro$Freq, decreasing = TRUE), ]
```

Para tener el top 10 de países con mayor cantidad de medallas de oro filtramos la tabla para obtener solo las primeras 10 filas.

```{r}
top10_oro <- tabla_paises_oro[0:10,]
head(top10_oro)
```

Graficamos la cantidad de medallas de oro que tiene cada país que se encuentra en el top 10.

```{r}
barplot(top10_oro$Freq, names.arg = top10_oro$Var1,xlab ="Países", ylab ="Cantidad de medallas de oro")
title("Top 10 países con mayor cantidad de medallas de oro")
```

Se puede observar que en el primer lugar del top 10 se encuentra Estados Unidos, con más de 2500 medallas de oro, una cantidad bastante mayor que el resto de los países. Le sigue la URS con un poco más de 1000 medallas de oro, mientras que el resto de países (Alemania, Gran Bretaña, Italia, Francia, Suecia, Canadá, Hungría y la República Democrática Alemana) se encuentran bastante cercanos entre sí, con alrededor de 500 medallas de oro.

#### Medallas de Plata

```{r}
athlete_events_plata <- athlete_events_not.na[athlete_events_not.na$Medal=="Silver",] #filtramos solo las medallas de plata
```

Vemos los países que obtienen medallas de plata.

```{r}
# Países con medalla de plata
head(unique(athlete_events_plata$NOC))
```

Creamos una tabla en donde se muestre la cantidad de medallas de plata que ha obtenido cada país durante los 120 años, y ordenamos los países de mayor a menor según la cantidad de medallas de plata.

```{r}
tabla_paises_plata <- data.frame(table(athlete_events_plata$NOC))

tabla_paises_plata <- tabla_paises_plata[order(tabla_paises_plata$Freq, decreasing = TRUE), ]
```

Para tener el top 10 de países con mayor cantidad de medallas de plata filtramos la tabla para obtener solo las primeras 10 filas.

```{r}
top10_plata <- tabla_paises_plata[0:10,]
head(top10_plata)
```

Graficamos la cantidad de medallas de plata que tiene cada país que se encuentra en el top 10.

```{r}
barplot(top10_plata$Freq, names.arg = top10_plata$Var1,xlab ="Países", ylab ="Cantidad de medallas de plata")
title("Top 10 países con mayor cantidad de medallas de plata")
```

Se puede observar que en el primer lugar del top 10 se encuentra Estados Unidos, con más de 1500 medallas de plata, una cantidad bastante mayor que el resto de los países. Le sigue Gran Bretaña y la URS con el mismo nivel de medallas, y más abajo Alemania y Francia con un poco más de 500 medallas de plata. Luego se encuentran Italia y Suecia con 500 medallas, mientras que Australia, Canadá y Rusia se ubican en los 3 últimos niveles con un poco menos de 500 medallas de plata.

#### Medallas de Bronce

```{r}
athlete_events_bronce <- athlete_events_not.na[athlete_events_not.na$Medal=="Bronze",] #filtramos solo las medallas de plata
```

Vemos los países que obtienen medallas de bronce.

```{r}
# Países con medalla de bronce
head(unique(athlete_events_bronce$NOC))
```

Creamos una tabla en donde se muestre la cantidad de medallas de bronce que ha obtenido cada país durante los 120 años, y ordenamos los países de mayor a menor según la cantidad de medallas de bronce

```{r}
tabla_paises_bronce <- data.frame(table(athlete_events_bronce$NOC))

tabla_paises_bronce <- tabla_paises_bronce[order(tabla_paises_bronce$Freq, decreasing = TRUE), ]
```

Para tener el top 10 de países con mayor cantidad de medallas de bronce filtramos la tabla para obtener solo las primeras 10 filas.

```{r}
top10_bronce <- tabla_paises_bronce[0:10,]
head(top10_bronce)
```

Graficamos la cantidad de medallas de bronce que tiene cada país que se encuentra en el top 10.

```{r}
barplot(top10_bronce$Freq, names.arg = top10_bronce$Var1,xlab ="Países", ylab ="Cantidad de medallas de bronce")
title("Top 10 países con mayor cantidad de medallas de bronce")
```

Se puede observar que en el primer lugar del top 10 se encuentra Estados Unidos, con más de 1200 medallas de bronce, una cantidad bastante mayor que el resto de los países. Le sigue Alemania, la URS, Francia y Gran Bretaña con un nivel similar de medallas sobre las 600, y más abajo se encuentran Suecia, Italia y Australia con aproximadamente 500 medallas. Finalmente, en los últimos 2 niveles se encuentran Canadá y Finlandia con un poco más de 400 medallas de bronce.

En conclusión, en los 3 gráficos los países que más se repiten son Estados Unidos, Alemania, la URS, Francia, Gran Bretaña, Suecia, Italia y Canadá, estando estos 8 países en el top 10 de los 3 tipos de medallas. Además, se observa que en los 3 gráficos Estados Unidos está muy por sobre el resto de países, mostrando una gran ventaja en la cantidad de medallas que obtienen.

### Cantidad de medallas obtenidas por género

```{r}
library(dplyr)
athlete_events2 <- athlete_events[c("Sex", "Medal")]

athlete_events2 <- athlete_events2 %>%
  mutate(Medal_bin = case_when(
    is.na(Medal) ~ 0,
    Medal %in% c("Bronze", "Silver", "Gold") ~ 1
  )
  )%>%
  filter(Medal_bin==1)%>%
  select(-Medal)

#Separamos la data por sexo
#Atletas mujeres
mujeres<-athlete_events1[athlete_events1$Sex=="F",]
#Atletas hombres
hombres<-athlete_events1[athlete_events1$Sex=="M",]


```

```{r}
#Tabla que contiene la cantidad de participantes según su género
table(athlete_events2$Sex)
```

Veamos la cantidad de medallas obtenidas por hombres y mujeres.

```{r}
#Generamos el barplot de medallas obtenidas según el género
barplot(table(athlete_events2$Sex))

```

A continuación, se presenta el tipo de medalla obtenida por sexo.

```{r}
#Medallas obtenidas por mujeres
medallas_fem<-data.frame(table(mujeres$Medal))
medallas_mujeres<-medallas_fem[order(medallas_fem$Freq),]
print("Mujeres")
medallas_mujeres
```

```{r}
#Medallas obtenidas por hombres
medallas_mas<-data.frame(table(hombres$Medal))
medallas_hombres<-medallas_mas[order(medallas_mas$Freq),]
print("Hombres")
medallas_hombres
```

### Barplot de participación según el género

```{r}
barplot(table(athlete_events1$Sex)  , main = "Histograma de participación según el género", xlab= "Género",ylab = "Cantidad de participantes", ylim=c(0,250000))
```

### Medallas por país y ciudad

```{r}

#Correlación Nacionalidad con Sede (obtener país según “Games”)
#como tenemos valores categoricos no podemos aplicar directamente una
#correlación. Por ende, haremos una tabla de contingencia. Para ello usaremos
#solamente los datos que tengan registros de haber obtenido una medalla
#creamos otro dataset con sólo los registros de medallas
athlete_events_medallas <- athlete_events
athlete_events_medallas <- athlete_events_medallas[!is.na(athlete_events_medallas$Medal),]

#ahora obtenemos la tabla de contingencia que nos indica cuántas veces un país
#obtuvo medallas en cierta ciudad.
tabla_contingencia <- data.frame(table(athlete_events_medallas$NOC, athlete_events_medallas$City))
tabla_contingencia <- tabla_contingencia  [order(tabla_contingencia$Freq, decreasing = TRUE), ]
head(tabla_contingencia)
```

### GDP x pais

```{r}

gdp_per_capita1 <- gdp_per_capita
gdp_per_capita1$mean <- rowMeans(gdp_per_capita1[,-c(1,2)], na.rm=TRUE)
head(gdp_per_capita1)
```

### Matriz de correlación

```{r}
#El Null se estandarizo con Height 175cm y Weight a 70 Kg.

#Se asigna 175 a los NULL en Height
atletas_std  <- athlete_events1 %>%
  mutate(
    Height = as.numeric(Height),
    Height = case_when(
      is.na(Height)~ 175,
      is.na(Height)==FALSE ~ Height)
  )

#Se asigna 70 a los NULL en Weight
atletas_std  <- atletas_std %>%
  mutate(Weight = case_when(
    is.na(Weight)==TRUE  ~ 70,
    is.na(Weight)==FALSE ~ Weight)
  )

#Se genera la matriz de correlación
data_correlacion <- atletas_std %>%
  select(Sex_bin, Height,  Weight,Year ,Medal_bin)
MCorrelacion<- cor(data_correlacion)


```

```{r}
#Printeamos la Matriz de correlación
MCorrelacion
```

## Preguntas y Problemas

Es en base a esta primera exploración de datos y el análisis previo del dataset, se plantean las preguntas que guiarán el resto del proyecto.

-   ¿Cómo se agrupan a partir de las características físicas (peso, altura) de los ganadores de medalla por deporte? ¿Existe alguna relación con los hechos históricos?

-   ¿Cuánto determina la riqueza de un país su rendimiento en los Juegos Olímpicos?

-   ¿Se puede predecir la distribución de los ganadores por país en un año?

-   ¿Cómo evolucionará la participación femenina en el futuro?

-   ¿Existen patrones en los datos que permitan determinar similitudes o diferencias entre países/atletas?

Mediante las preguntas se espera comprender la influencia tanto las medallas, participación y juegos realizados, para lograr ver sus consecuencias en la sociedad. Por ejemplo, observar como las olimpiadas han influido en la paridad de género y/o estudiar la evolución de los atletas al incorporar nuevas disciplinas.
